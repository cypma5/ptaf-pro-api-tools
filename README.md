# PTAF PRO API Client

Утилита для работы с API PTAF PRO 4.3.0, позволяющая:
1. Импорт правил
   - 
3. Экспорт правил
4. Управление шаблонами политик
5. Управление настройками traffic_settings
6. Управление действиями в правилах
7. Получение конфигураций тенантов
8. Восстановление конфигураций тенантов
9. Перенос объектов между тенантами
10. Опасные действия
11. Работа с тенантами
12. Выход



## Установка
Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/ptaf-api-client.git
cd ptaf-api-client
```


3.Измените конфигурационный файл ptaf_api_client_config.json

```
{
  "ptaf_url": "https://your-ptaf-server",
  "username": "login",
  "password": "password",
  "api_path": "/api/ptaf/v4",
  "verify_ssl": false,
  "ssl_cert_path": null
}
```

# Использование в CLI
```
python3 ptaf_api_client.py [опции]

Без опции интерактивный режим

--source DIR - Импорт правил из указанной директории
--export - Экспорт правил
--delete-all - Удалить все пользовательские правила
--config FILE - Указать альтернативный конфигурационный файл
--debug - Включить отладочный режим
--snapshot - создать бекап конфигурации всех доступных изолированные пространств

```

# Использование в интерактивном режиме
```
python3 ptaf_api_client.py

Главное меню:
1. Импорт правил
2. Экспорт правил
3. Управление шаблонами политик
4. Управление настройками traffic_settings
    1. NGINX: Настройки загрузки файлов
    2. Envoy Proxy: Sticky Session
    3. Envoy Core: Настройки TLS
    4. NGINX: Настройки access.log
    5. NGINX: Настройки error.log
    6. Система: Лимиты приложений
    7. Система: Debug режим
    8. Просмотр текущих настроек
5. Управление действиями в правилах
    1. Замена или добавление действий
6. Получение конфигураций тенантов
    1. Получить конфигурацию текущего тенанта
    2. Получить конфигурации со всех тенантов
7. Восстановление конфигураций тенантов
    1. Восстановить 'защищаемые сервера' (бекенды) в текущий тенант
    2. Восстановить 'Конфигурацию безопасности' (с выбором версии снапшота)
8. Перенос объектов между тенантами
    1. Перенос защищаемых серверов в другой тенант
9. Опасные действия
10. Выход
```


# Ограничения
#### Не работает экспорт\импорт правил использующих динамические списки
